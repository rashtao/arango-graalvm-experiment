<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.rashtao.arangodb</groupId>
    <artifactId>graalvm-experiment</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <graal.version>19.3.1</graal.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>com.arangodb</groupId>
            <artifactId>arangodb-java-driver</artifactId>
            <version>7.0.0-SNAPSHOT</version>
            <exclusions>
                <exclusion>
                    <groupId>io.netty</groupId>
                    <artifactId>netty-transport-native-epoll</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.graalvm.nativeimage</groupId>
                <artifactId>native-image-maven-plugin</artifactId>
                <version>${graal.version}</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>native-image</goal>
                        </goals>
                        <phase>package</phase>
                    </execution>
                </executions>
                <configuration>
                    <imageName>${project.name}</imageName>
                    <mainClass>Application</mainClass>
                    <buildArgs>
                        --verbose
                        --no-server
                        --no-fallback
                        --initialize-at-build-time
                        -H:+TraceClassInitialization
                        -H:+ReportExceptionStackTraces
                        --allow-incomplete-classpath
                        --report-unsupported-elements-at-runtime
                        -DremoveUnusedAutoconfig=true
                        -DremoveYamlSupport=true
                        -H:ReflectionConfigurationFiles=../reflection-config.json
                        --initialize-at-run-time=ch.qos.logback.classic.spi.PackagingDataCalculator,reactor.netty.http.client.HttpClient,reactor.netty.http.server.HttpServer,reactor.netty.tcp.TcpClient,reactor.netty.tcp.TcpServer,sun.reflect.misc.Trampoline,io.netty.channel.DefaultChannelId,io.netty.channel.socket.InternetProtocolFamily,io.netty.handler.codec.http2.Http2ServerUpgradeCodec,io.netty.handler.codec.http2.CleartextHttp2ServerUpgradeHandler,io.netty.resolver.HostsFileEntriesResolver,io.netty.util.NetUtil
                        --initialize-at-build-time=io.netty,ch.qos.logback.core,ch.qos.logback.classic,ch.qos.logback.classic.spi,ch.qos.logback.classic.util,ch.qos.logback.classic.util.ContextSelectorStaticBinder,ch.qos.logback.classic.LoggerContext,ch.qos.logback.classic.selector.DefaultContextSelector,ch.qos.logback.classic.Logger,ch.qos.logback.classic.selector.DefaultContextSelector,ch.qos.logback.classic.spi.LoggerContextVO,ch.qos.logback.classic.spi.TurboFilterList,ch.qos.logback.core.BasicStatusManager,ch.qos.logback.core.spi.LogbackLock,ch.qos.logback.core.status.InfoStatus,ch.qos.logback.core.util.COWArrayList,ch.qos.logback.classic.layout.TTLLLayout,ch.qos.logback.core.util.CachingDateFormatter,ch.qos.logback.classic.pattern.ThrowableProxyConverter,ch.qos.logback.classic.util.LoggerNameUtil,ch.qos.logback.core.spi.FilterAttachableImpl,ch.qos.logback.classic.util.LogbackMDCAdapter,ch.qos.logback.classic.spi.LoggingEvent,ch.qos.logback.core.helpers.CyclicBuffer,ch.qos.logback.core.encoder.LayoutWrappingEncoder,ch.qos.logback.core.joran.spi.ConsoleTarget\$1,ch.qos.logback.core.ConsoleAppender,ch.qos.logback.core.spi.AppenderAttachableImpl,ch.qos.logback.classic.BasicConfigurator,org.slf4j.MDC,org.slf4j.helpers.NOPLogger,org.slf4j.helpers.Util,org.slf4j.helpers.NOPLoggerFactory,org.slf4j.helpers.SubstituteLoggerFactory,org.slf4j.LoggerFactory,org.slf4j.impl.StaticLoggerBinder,org.slf4j.helpers.FormattingTuple,org.slf4j.helpers.MessageFormatter,javax.validation,javax.validation.Validation,javax.validation.ConstraintValidator,javax.validation.ValidationException
                    </buildArgs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>8</source>
                    <target>8</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>